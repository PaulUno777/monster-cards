<div class="preview">
    <app-playing-card [monster]="monsterPreview" />
</div>
<div class="main">
    <form [formGroup]="monsterForm" (submit)="submit($event)">
        <mat-form-field>
            <mat-label for="name">Name</mat-label>
            <input matInput id="name" name="name" type="text" formControlName="name">
            @if(isFieldValid('name')){
            <mat-error>This field is required.</mat-error>
            }
        </mat-form-field>
        <div class="form-field">
            <button mat-raised-button type="button" (click)="imageInput.click()">
                Upload file {{ imageInput?.files?.[0]?.name || '...'}}
            </button>
            <input hidden #imageInput id="image" name="image" type="file" (change)="onFileChange($event)">
            @if(isFieldValid('image')){
            <mat-error>This field is invalid.</mat-error>
            }
        </div>
        <mat-form-field>
            <mat-label>Type</mat-label>
            <mat-select id="type" name="type" formControlName="type">
                @for(type of monsterTypes; track type){
                <mat-option [value]="type">{{type}}</mat-option>
                }
            </mat-select>
            @if(isFieldValid('type')){
            <mat-error>This field is invalid.</mat-error>
            }
        </mat-form-field>
        <mat-form-field>
            <mat-label for="healthPoints">Health points</mat-label>
            <input matInput id="healthPoints" name="healthPoints" type="number" formControlName="healthPoints">
            @if(isFieldValid('healthPoints')){
            <mat-error>This field is invalid.</mat-error>
            }
        </mat-form-field>
        <mat-form-field>
            <mat-label for="figureCaption">Figure caption</mat-label>
            <input matInput id="figureCaption" name="figureCaption" type="text" formControlName="figureCaption">
            @if(isFieldValid('figureCaption')){
            <mat-error>This field is invalid.</mat-error>
            }
        </mat-form-field>
        <mat-form-field>
            <mat-label for="attackName">Attack name</mat-label>
            <input matInput id="attackName" name="attackName" type="text" formControlName="attackName">
            @if(isFieldValid('attackName')){
            <mat-error>This field is invalid.</mat-error>
            }
        </mat-form-field>
        <mat-form-field>
            <mat-label for="attackStrength">Attack strength</mat-label>
            <input matInput id="attackStrength" name="attackStrength" type="number" formControlName="attackStrength">
            @if(isFieldValid('attackStrength')){
            <mat-error>This field is invalid.</mat-error>
            }
        </mat-form-field>
        <mat-form-field>
            <mat-label>Attack description</mat-label>
            <textarea matInput id="attackDescription" name="attackDescription"
                formControlName="attackDescription"></textarea>
            @if(isFieldValid('attackDescription')){
            <mat-error>This field is invalid.</mat-error>
            }
        </mat-form-field>
        <div class="button-container">
            <button mat-button (click)="navigateBack()">Back</button>
            <button mat-flat-button type="submit" [disabled]="monsterForm.invalid">Save</button>
        </div>


    </form>
</div>